(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/my/modify"],{"3e22":function(n,e,o){"use strict";o.r(e);var t=o("7aa6"),i=o("b8c0");for(var s in i)"default"!==s&&function(n){o.d(e,n,(function(){return i[n]}))}(s);o("8ad8");var a,c=o("f0c5"),u=Object(c["a"])(i["default"],t["b"],t["c"],!1,null,null,null,!1,t["a"],a);e["default"]=u.exports},"694c":function(n,e,o){"use strict";(function(n){o("576d");t(o("66fd"));var e=t(o("3e22"));function t(n){return n&&n.__esModule?n:{default:n}}n(e.default)}).call(this,o("c11b")["createPage"])},"7aa6":function(n,e,o){"use strict";var t;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return t}));var i=function(){var n=this,e=n.$createElement;n._self._c},s=[]},"8ad8":function(n,e,o){"use strict";var t=o("f634"),i=o.n(t);i.a},b8c0:function(n,e,o){"use strict";o.r(e);var t=o("ffe8"),i=o.n(t);for(var s in t)"default"!==s&&function(n){o.d(e,n,(function(){return t[n]}))}(s);e["default"]=i.a},f634:function(n,e,o){},ffe8:function(n,e,o){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={data:function(){return{code:"",yzm:!1,fu:!0,lxfsTop:"",bottomBarTop:"",model:"",company:"",TIME_COUNT:60,count:"",show:!0,token:"",userinfo:[],username:"",phone:"",oldphone:"",user_image:""}},onLoad:function(e){var o=this;n.getStorage({key:"token",success:function(n){o.token=n.data}}),this.$api.userinfo({token:o.token}).then((function(n){console.log("用户信息",n),o.userinfo=n.data[0],o.username=n.data[0].username,o.phone=n.data[0].phone,o.oldphone=n.data[0].phone,o.user_image=n.data[0].user_image})),void 0==e.company||(o.company=e.company,n.setNavigationBarTitle({title:"完善个人资料"}))},methods:{back:function(){n.navigateBack({})},jump:function(){var e=this;this.username&&this.phone?11!=this.phone.length?n.showModal({title:"提示",content:"您输入的手机号码有误",showCancel:!1,confirmColor:"#0ABB9A"}):this.oldphone==this.phone||this.code?(this.username||this.phone)&&(n.uploadFile({url:this.gethttp+"/upload_headimg",filePath:e.user_image,name:"imgurl",imgurl:e.user_image,header:{token:e.token},formData:{},success:function(n){console.log(n),e.user_image=n.link},fail:function(n){console.log(n)}}),this.$api.usersave({token:e.token,username:e.username,phone:e.phone,user_image:e.user_image}).then((function(e){e?n.showModal({title:"提示",content:"修改成功",showCancel:!1,confirmColor:"#0ABB9A",success:function(e){console.log("修改成功"),n.switchTab({url:"my"})}}):console.log("请求失败")}))):n.showModal({title:"提示",content:"请输入验证码",showCancel:!1,confirmColor:"#0ABB9A"}):n.showModal({title:"提示",content:"您的个人信息未填写完整\n请填写完整后再点击提交\n",showCancel:!1,confirmColor:"#0ABB9A"})},handleChooseImg:function(){var e=this;n.chooseImage({count:1,sizeType:["original","compressed"],success:function(n){var o=n.tempFilePaths;e.user_image=o[0]}})},onInput:function(n){console.log(n),this.yzm=!0,this.fu=!1},onHeight:function(n){this.fu=!1},noInput:function(n){this.fu=!0,this.phone!=this.oldphone&&""!=this.phone||(this.yzm=!1)},send_Code:function(){var e=this;this.phone.length<11?n.showToast({icon:"none",title:"手机号输入有误"}):this.timer||(this.count=this.TIME_COUNT,this.show=!1,n.showModal({title:"提示",content:"手机二维码已发送\n请你打开短信查看\n",showCancel:!1,confirmColor:"#0ABB9A"}),this.timer=setInterval((function(){e.count>0&&e.count<=e.TIME_COUNT?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null)}),1e3))},onResize:function(n){alert(n)}},onReady:function(){var e=this;n.getSystemInfo({success:function(n){console.log(n),e.lxfsTop=n.windowHeight-88+"px",e.bottomBarTop=n.windowHeight-56+"px",e.model=n.model}})}};e.default=o}).call(this,o("c11b")["default"])}},[["694c","common/runtime","common/vendor"]]]);