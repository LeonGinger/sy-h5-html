(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-business-business-apply"],{"0397":function(s,e,i){var t=i("85b7");"string"===typeof t&&(t=[[s.i,t,""]]),t.locals&&(s.exports=t.locals);var n=i("4f06").default;n("4ecaebec",t,!0,{sourceMap:!1,shadowMode:!1})},"586e":function(s,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return t}));var t={uForm:i("5c9c").default,uFormItem:i("2989").default,uInput:i("79dd").default,uMask:i("8cd4").default,uUpload:i("d730").default},n=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("v-uni-view",{staticClass:"wrapper"},[t("v-uni-image",{staticClass:"bg",attrs:{src:i("73d9")}}),t("v-uni-view",{staticClass:"content",style:{height:s.bgHeight}},[t("v-uni-view",{staticClass:"whitebox"},[t("v-uni-view",{staticClass:"utitlebox"},[t("v-uni-view",{staticClass:"utitleblock"}),t("v-uni-view",{staticClass:"utitle"},[s._v("入驻申请")])],1),t("u-form",{staticStyle:{"margin-left":"20upx","margin-top":"20upx"}},[t("u-form-item",{attrs:{label:"商户名称:"}},[t("u-input",{attrs:{placeholder:"请输入商户或公司名称"},model:{value:s.shuju.business_name,callback:function(e){s.$set(s.shuju,"business_name",e)},expression:"shuju.business_name"}})],1),t("u-form-item",{attrs:{label:"商户地址:"}},[t("u-input",{attrs:{placeholder:"请输入商户或公司的详细地址"},model:{value:s.shuju.business_address,callback:function(e){s.$set(s.shuju,"business_address",e)},expression:"shuju.business_address"}})],1),t("u-form-item",{attrs:{label:"法人姓名:"}},[t("u-input",{attrs:{placeholder:"请输入商户法定代表人的姓名"},model:{value:s.shuju.responsible_name,callback:function(e){s.$set(s.shuju,"responsible_name",e)},expression:"shuju.responsible_name"}})],1),t("u-form-item",{attrs:{label:"联系方式:"}},[t("u-input",{attrs:{placeholder:"请输入商户联系人的手机号码",type:"number",maxlength:"11"},model:{value:s.shuju.responsible_phone,callback:function(e){s.$set(s.shuju,"responsible_phone",e)},expression:"shuju.responsible_phone"}})],1)],1),t("v-uni-view",{staticClass:"utitlebox",staticStyle:{"margin-top":"30upx","margin-bottom":"20upx"}},[t("v-uni-view",{staticClass:"utitleblock"}),t("v-uni-view",{staticClass:"utitle"},[s._v("上传企业证书")]),t("v-uni-view",{staticClass:"illustration",on:{click:function(e){arguments[0]=e=s.$handleEvent(e),s.ck.apply(void 0,arguments)}}},[s._v("查看例图")])],1),t("u-mask",{attrs:{show:s.cklt},on:{click:function(e){arguments[0]=e=s.$handleEvent(e),s.qx.apply(void 0,arguments)}}},[t("v-uni-view",{class:0==s.cklt?"noseeill":"seeill"},[t("v-uni-image",{staticClass:"ltimg",attrs:{src:i("fd8d")}})],1)],1),t("v-uni-text",{staticClass:"scts"},[s._v("(请上传食品经营许可证、营业执照等)")]),t("v-uni-view",{staticClass:"scbox"},[t("u-upload",{ref:"uUpload",attrs:{action:s.action,"auto-upload":!1,"max-count":"6",model:s.model}})],1)],1),t("v-uni-view",{staticClass:"btbox",staticStyle:{"margin-top":"100upx"}},[t("v-uni-view",{staticClass:"bt1",on:{click:function(e){arguments[0]=e=s.$handleEvent(e),s.btback.apply(void 0,arguments)}}},[s._v("返回")]),t("v-uni-view",{staticClass:"bt2",on:{click:function(e){arguments[0]=e=s.$handleEvent(e),s.btconfirm.apply(void 0,arguments)}}},[s._v("申请")])],1)],1)],1)},a=[]},"73d9":function(s,e,i){s.exports=i.p+"static/img/my-bg.de4e4deb.jpg"},"790d":function(s,e,i){"use strict";var t=i("0397"),n=i.n(t);n.a},"85b7":function(s,e,i){var t=i("24fb");e=t(!1),e.push([s.i,"uni-page-body[data-v-5eb643d6]{background-color:initial}.bg[data-v-5eb643d6]{width:100%;height:100%;position:fixed;top:0;left:0;z-index:-1}.scbox[data-v-5eb643d6]{margin-top:%?20?%;box-shadow:0 0 %?12?% #c0c4cc;border-radius:%?20?%;padding:%?15?% %?0?% %?15?% %?9?%}.scts[data-v-5eb643d6]{color:silver;font-size:%?20?%;margin-left:%?15?%}.noseeill[data-v-5eb643d6]{display:none}.seeill[data-v-5eb643d6]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;height:100%}.illustration[data-v-5eb643d6]{width:%?130?%;height:%?50?%;background-color:#0abb9a;margin-left:%?20?%;color:#fff;font-size:%?20?%;line-height:%?50?%;text-align:center;border-radius:%?15?%;margin-top:%?-5?%}.ltimg[data-v-5eb643d6]{height:%?830?%;width:%?640?%}body.?%PAGE?%[data-v-5eb643d6]{background-color:initial}",""]),s.exports=e},"95ef":function(s,e,i){"use strict";i("99af"),i("4de4"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={data:function(){return{cklt:!1,bgHeight:"",fileList:[],action:"",shuju:{business_name:"",business_address:"",responsible_name:"",responsible_phone:"",appraisal_img:{}},verify_if:""}},methods:{ck:function(){this.cklt=!0},qx:function(){this.cklt=!1},btback:function(){uni.switchTab({url:"../my/my"})},btconfirm:function(){var s=this,e=this;uni.showLoading({title:"加载中...",mask:!0}),e.fileList=this.$refs.uUpload.lists.filter((function(s){return s}));var i=/[^\u4e00-\u9fa5]/;""==this.shuju.business_name||""==this.shuju.business_address||""==this.shuju.responsible_name||""==this.shuju.snum?uni.showToast({title:"请将信息输入完整",icon:"none"}):i.test(this.shuju.responsible_name)||this.shuju.responsible_name.length>4||this.shuju.responsible_name.length<2?(uni.hideLoading(),uni.showToast({title:"您的商家姓名输入有误",icon:"none"})):1!=this.shuju.responsible_phone.substr(0,1)||this.shuju.responsible_phone.length>11||this.shuju.responsible_phone.length<11?(uni.hideLoading(),uni.showToast({title:"您的手机号码有误",icon:"none"})):0==this.$refs.uUpload.lists.length?(uni.hideLoading(),uni.showToast({title:"请选择图片",icon:"none"})):function(){var e=s;e.img_list=[];for(var i=[],t=[],n=[],a=[],o=0;o<e.$refs.uUpload.lists.length;o++)e.$refs.uUpload.lists[o].file?i.push(e.$refs.uUpload.lists[o]):t.push(e.$refs.uUpload.lists[o].url);if(console.log("获取的图片",t),console.log("要解析的图片",i),console.log("获取的图片cd",t.length),console.log("要解析的图片cd",i.length),0!=i.length&&0==t.length){console.log("zsList",i),console.log("a");for(var l=0;l<i.length;l++)a.push(i[l].url);console.log("newspzsList",a);for(var u=0;u<a.length;u++)e.$api.upFile(a[u]).then((function(s){var e=JSON.parse(s[1].data);n.push(e.data.link)}));setTimeout((function(){console.log("linkcd",n.length),console.log("link",n),e.shuju.appraisal_img=n,console.log("解析后要上传的图片",e.shuju.appraisal_img),e.tijiao()}),1e3)}else if(0==i.length&&0!=t.length)console.log("b"),e.shuju.appraisal_img=t,console.log("获取后要上传的图片",e.shuju.appraisal_img),e.tijiao();else if(0!=i.length&&0!=t.length){console.log("c");for(var r=0;r<i.length;r++)a.push(i[r].url);console.log("newspzsList",a);for(var c=0;c<a.length;c++)e.$api.upFile(a[c]).then((function(s){var e=JSON.parse(s[1].data);n.push(e.data.link)}));setTimeout((function(){console.log("linkcd",n.length),console.log("zsref",t),e.shuju.appraisal_img=n,console.log("解析后要上传的图片",e.shuju.appraisal_img),e.shuju.appraisal_img=e.shuju.appraisal_img.concat(t),console.log("合并后要上传的图片",e.shuju.appraisal_img),e.tijiao()}),1e3)}}()},tijiao:function(){var s=this;console.log("状态",s.verify_if),console.log("要上传的数组",s.shuju),this.shuju.appraisal_img?2!=s.verify_if?this.$api.business_applyad(s.shuju).then((function(s){uni.hideLoading(),console.log("res",s),uni.showModal({title:"申请成功",content:"将在3个工作日内给予您答复\n请多关注公众号推送\n",showCancel:!1,confirmColor:"#0ABB9A",success:function(s){s.confirm&&wx.reLaunch({url:"../my/my"})}})})):this.$api.business_open(s.shuju).then((function(s){uni.hideLoading(),console.log("res",s),uni.showModal({title:"申请成功",content:"将在3个工作日内给予您答复\n请多关注公众号推送\n",showCancel:!1,confirmColor:"#0ABB9A",success:function(s){s.confirm&&wx.reLaunch({url:"../my/my"})}})})):(uni.hideLoading(),uni.showToast({title:"请选择图片",icon:"none"}))}},onLoad:function(){var s=this,e=[];s.$api.userinfo().then((function(i){if(i.data.business){s.verify_if=i.data.business.verify_if,s.shuju.business_name=i.data.business.business_name,s.shuju.business_address=i.data.business.business_address,s.shuju.responsible_name=i.data.business.responsible_name,s.shuju.responsible_phone=i.data.business.responsible_phone,i.data.business_appraisal.appraisal_image=JSON.parse(i.data.business_appraisal.appraisal_image),console.log("商家",i.data.business),console.log("证书",i.data.business_appraisal);for(var t=0;t<i.data.business_appraisal.appraisal_image.length;t++)if(e.push({url:i.data.business_appraisal.appraisal_image[t]}),s.$refs.uUpload.lists.push(e[t]),console.log(e),e.length==i.data.business_appraisal.appraisal_image.length)break;s.shuju.appraisal_img=i.data.business.appraisal_image}}))},onReady:function(){var s=this;uni.getSystemInfo({success:function(e){e.windowHeight,e.windowWidth;s.bgHeight=e.windowHeight-80+"px"}})}};e.default=t},"9c06":function(s,e,i){"use strict";i.r(e);var t=i("95ef"),n=i.n(t);for(var a in t)"default"!==a&&function(s){i.d(e,s,(function(){return t[s]}))}(a);e["default"]=n.a},ada2:function(s,e,i){"use strict";i.r(e);var t=i("586e"),n=i("9c06");for(var a in n)"default"!==a&&function(s){i.d(e,s,(function(){return n[s]}))}(a);i("790d");var o,l=i("f0c5"),u=Object(l["a"])(n["default"],t["b"],t["c"],!1,null,"5eb643d6",null,!1,t["a"],o);e["default"]=u.exports},fd8d:function(s,e,i){s.exports=i.p+"static/img/yyzz.d3eca283.jpg"}}]);